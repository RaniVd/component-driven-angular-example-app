var app = angular.module('exampleApp', ['ui.router', 'ngMaterial', 'exampleApp.directives', 'exampleApp.services', 'exampleApp.filters', 'exampleApp.routing']);

app.config(['$httpProvider', '$compileProvider', function($httpProvider, $compileProvider) {
    //schedules http requests, all requests within 10ms are combined together -> 1 digest
    $httpProvider.useApplyAsync(true);
    //TODO enable this for production -> performance boost
    //$compileProvider.debugInfoEnabled(false);
}]);

angular.module('exampleApp.directives', []);
angular.module('exampleApp.services', []);
angular.module('exampleApp.filters', []);
angular.module('exampleApp.routing', []);
angular.module('exampleApp.routing').config(['$stateProvider', '$urlRouterProvider', function ($stateProvider, $urlRouterProvider) {

	$stateProvider
		.state('dashboard', {
			url: '/dashboard',
			template: '<page-dashboard></page-dashboard>'
		});

	$urlRouterProvider.otherwise('/dashboard');
}]);
(function() {
	angular.module('exampleApp.directives').directive('pageDashboard', dashboard);

	function dashboard() {
		return {
			templateUrl: 'app/pages/dashboard-page/dashboard-page.html',
			controllerAs: 'dashboard',
			controller: ['$scope', '$log', function ($scope, $log) {
				var vm = this;

				vm.teamsInPhaseOne = [
					{name: 'Team1', 'members': [{'name': 'member1'}]}
				];
				vm.teamsInPhaseTwo = [
					{name: 'Team2', 'members': [{'name': 'member2'}]}

				];
				vm.teamsInPhaseThree = [
					{name: 'Team3', 'members': [{'name': 'member3'}]}
				];

				vm.viewTeamDetail = function(event, data) {
					//load team detail
					$log.info('loading team detail ', data);
				};

				$scope.$on('dashboard-view-team', vm.viewTeamDetail);
			}]
		}
	}
})();
(function() {
    angular.module('exampleApp.directives').directive('elemLane', function() {
        return {
            replace: true,
            templateUrl: 'app/components/dashboard/lane/lane.html',
            scope: {
                teams: '=',
                description: '@'
            }
        }
    });
})();

(function() {
    angular.module('exampleApp.directives').directive('elemTeam', team);

    function team() {
        return {
            templateUrl: 'app/components/dashboard/team/team.html',
            scope: {
                competingTeam: '='
            },
            link: function(scope, element, attr) {
                function viewDetail() {
                    scope.$emit('dashboard-view-team', {'team': scope.competingTeam});
                }

                element.bind('click', viewDetail);
            }
        }
    }
})();
(function() {
	angular.module('exampleApp.directives').directive('elemToolbar', toolbar);

	function toolbar() {
		return {
			templateUrl: 'app/components/toolbar/toolbar.html'
		}
}})();